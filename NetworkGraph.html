<!DOCTYPE html>

<!--  to do: increase size of link mouseover ability
             mouseover legend text
             change orientation of tooltip 
             highlight links when you mouseover a person's name
             show two different links simultaneously 
             button to toggle 2012 data-->

<meta charset="utf-8">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.js"></script>
<script src="JaneD3.js"></script>
<script type="text/javascript" src="jquery.tipsy.js"></script>

<link href="tipsy.css" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Arvo:400,700,400italic,700italic' rel='stylesheet' type='text/css'/>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1.0', {'packages':['corechart']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Category');
        data.addColumn('number', 'Number of Messages Sent');
        data.addRows([
          ['Fri', 462],['Sat', 420],['Thu', 274],['Wed', 243],
          ['Sun', 239],
          ['Tue', 166],
          ['Mon', 147],
        ]);

        var options = {'title':'Number of Messages Sent Per Day',
                        'font': '17px', 
                       'width':600,
                       'height':380};

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
      
    </script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Hour', 'Number of Messages'],
          ['5 am',1],
          ['8 am',6],
          ['9 am',22],
          ['10 am',51],
          ['11 am',69],
          ['12 pm',82],
          ['1 pm',84],
          ['2 pm',117],
          ['3 pm',101],
          ['4 pm',95],
          ['5 pm',137],
          ['6 pm',125],
          ['7 pm',158],
          ['8 pm',107],
          ['9 pm',185],
          ['10 pm',256],
          ['11 pm',145],
          ['12 am',71],
          ['1 am',92],
          ['2 am',39],
          ['3 am',6],
          ['4 am',2],
        ]);

      var options = {'title':'Number of Messages Sent Per Hour',
                        'titleTextStyle': {'fontSize': 17.75},
                       'width':700,
                       'height':500,
                      'margin-left': -100};
        var chart = new google.visualization.BarChart(document.getElementById('chart_div2'));
        chart.draw(data, options);
      }
     </script>
  </head>
<style>

.link {
  fill: none;
  stroke: #666;
  stroke-width: 1.5px;
}

.link.dorm {
  stroke: #756bb1;
}
.link.class {
  stroke: #feb24c;
}
.link.dira {
  stroke: #f03b20;
}
.link.block{
  stroke:#dd4477;
}
.link.other{
  stroke:#22aa99;
}
.node circle {
  fill: #7fcdbb;
  stroke: #fff;
  stroke-width: 1.5px;
}

text {
  font: 12px sans-serif;
  pointer-events: none;
}

.legend rect {
  fill:white;
  stroke:black;
  opacity:0.8;
}


</style>
<body>
  <!-- <button>Toggle Sophomore Year Data</button> -->
  <div id="slide1">
  <div>
    <div id="CooperBlackLogo"> </div>
  </div>
</div>

<div id="slide2">
  
   <!--  <div id = "numberCircle">14</div> -->
    <div id = "founders"><H1> 14 Founders</H1></div>

</div>
<script>


// http://blog.thomsonreuters.com/index.php/mobile-patent-suits-graphic-of-the-day/
var links = [
{"source": "Autri", "target": "Hong", "type": 1, "comment": "Southgate"},
{"source": "Jess", "target": "Ramy", "type": 3, "comment": "DIRA"},
{"source": "Autri", "target": "Wally", "type": 2, "comment": "AMI 160: Politics and Film"},
// {"source": "Sachin", "target": "Fred", "type": 5, "comment": "O-week"},
    {"source": "Ramy", "target": "Frank", "type": 4, "comment": "Edens"},
    {"source": "Frank", "target": "Julian", "type": 4, "comment": "Edens"},
    {"source": "Ramy", "target": "Julian", "type": 4, "comment": "Edens"},
    {"source": "Jess", "target": "Brittany", "type": 4, "comment": "Craven"},
    {"source": "Autri", "target": "Justin", "type": 4, "comment": "Crowell EE"},
    {"source": "Hong", "target": "Susanna", "type": 4, "comment": "Kilgo"},
    {"source": "Sachin", "target": "Justin", "type": 4, "comment": "Crowell EE"},
    {"source": "Sachin", "target": "Autri", "type": 4, "comment": "Crowell EE"},
    {"source": "Sachin", "target": "Fred", "type": 4, "comment": "Crowell EE"},
    {"source": "Justin", "target": "Fred", "type": 4, "comment": "Crowell EE"},
    {"source": "Autri", "target": "Fred", "type": 4, "comment": "Crowell EE"}, 
{"source": "Ramy", "target": "Frank", "type": 1, "comment": "Randolph"},
{"source": "Frank", "target": "Julian", "type": 1, "comment": "Randolph"},
{"source": "Ramy", "target": "Julian", "type": 1, "comment": "Randolph"},
{"source": "Jess", "target": "Brittany", "type": 1, "comment": "Blackwell"},
{"source": "Julian", "target": "Jess", "type": 3, "comment": "DIRA"},
{"source": "Julian", "target": "Autri", "type": 3, "comment": "DIRA"},
{"source": "Autri", "target": "Ramy", "type": 3, "comment": "DIRA"},
{"source": "Julian", "target": "Ramy", "type": 3, "comment": "DIRA"},
{"source": "Jess", "target": "Autri", "type": 3, "comment": "DIRA"},
{"source": "Autri", "target": "Susanna", "type": 1, "comment": "Southgate"},
{"source": "Autri", "target": "Brian", "type": 2, "comment": "AMI 160: Politics and Film"},
{"source": "Hong", "target": "Susanna", "type": 1, "comment": "Southgate"},
{"source": "Susanna", "target": "Jane", "type": 2, "comment": "Mechanical Engineering"},
{"source": "Jane", "target": "Justin", "type": 2, "comment": "Focus"},
{"source": "Jane", "target": "Sachin", "type": 2, "comment": "Focus"},
{"source": "Sachin", "target": "Justin", "type": 2, "comment": "Focus"},
{"source": "Jane", "target": "Justin", "type": 1, "comment": "Jarvis"},
{"source": "Jane", "target": "Sachin", "type": 1, "comment": "Jarvis"},
{"source": "Sachin", "target": "Justin", "type": 1, "comment": "Jarvis"},
{"source": "Brian", "target": "Wally", "type": 2, "comment": "AMI 160: Politics and Film"}

];

var nodes = [];

// Compute the distinct nodes from the links.
links.forEach(function(link) {
  link.source = nodes[link.source] || (nodes[link.source] = {name: link.source});
  link.target = nodes[link.target] || (nodes[link.target] = {name: link.target});
});

links.forEach(function(link) {
  if ((link.type) == 1) {
    link.type = "dorm";
  } else if ((link.type) == 2) {
    link.type = "class";
  } else if ((link.type) == 3) {
    link.type = "dira";
  } else if ((link.type) == 5) {
    link.type = "other";
  } 
  else if ((link.type) == 4) {
    link.type = "block";
  } 
});

var width = 850,
    height = 600;

var force = d3.layout.force()
    .nodes(d3.values(nodes))
    .links(links)
    .size([width, height])
    .linkDistance(60)
    .charge(-1000)
    .on("tick", tick)
    .start();

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);


var classNames = ["dorm", "class", "dira"];

var link = svg.selectAll(".link")
    .data(force.links())
  .enter().append("svg:line")
    .attr("class", function(d) { return "link " + d.type})
    .attr("data-legend",function(d) { 
      if (d.type == "dorm"){
        return "freshman dorm";
      }
      if (d.type == "block"){
        return "sophomore block";
      }
      if (d.type == "dira"){
        return "DIRA";
      }
      else return d.type})
    .attr("title", function(d) {return d.comment})

    .on("mouseover", function(d) {d3.select(this)
      .style("stroke-width", "3.5px")})
    // .on("mouseover", tip.show) 
      
      
    .on("mouseout", function(d) {
      // tip.hide;
      d3.select(this)
      .style("stroke-width", "1.5px");
    });


var node = svg.selectAll(".node")
    .data(force.nodes())
  .enter().append("g")
    .attr("class", "node")
    .on("mouseover", mouseover)
    .on("mouseout", mouseout)
    .call(force.drag);

node.append("circle")
    .attr("r", 15);

node.append("text")
    .attr("x", 16)
    .attr("dy", ".35em")
    .text(function(d) { return d.name; });

function tick() {
  link
      .attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node
      .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
}

function mouseover() {
  d3.select(this).select("circle").transition()
      .duration(550)
      .attr("r", 18);
  d3.select(this).select("text").transition()
      .duration(550)
      .attr("x", 19)
      // .style("stroke", "lightsteelblue")
      // .style("stroke-width", ".5px")
      .style("font", "15px sans-serif");

  // var x = d3.selectAll(".link")
  //   if (x.source === this.name){
  //     x.transition().duration(550).style("stroke-width", "3.5px");
  //   }
  // if (d3.select(this).select("text") == "Justin"){
  //   d3.select(this).select("text").transition()
  //     .duration(550)
  //     .attr("x", 30);
  //   }
  }

function mouseout() {
  d3.select(this).select("circle").transition()
      .duration(550)
      .attr("r", 15);
  d3.select(this).select("text").transition()
      .duration(750)
      .attr("x", 16)
      // .style("stroke", "lightsteelblue")
      // .style("stroke-width", ".5px")
      .style("font", "12px sans-serif");
  d3.selectAll(".link")
    .transition().duration(550)
    .style("stroke-width", "1.5px");
  }


(function() {
d3.legend = function(g) {
  g.each(function() {

    var classNames = [".dorm", ".class", ".dira"];

    var g= d3.select(this),
        items = {},
        svg = d3.select(g.property("nearestViewportElement")),
        legendPadding = g.attr("data-style-padding") || 5,
        lb = g.selectAll(".legend-box").data([true]),
        li = g.selectAll(".legend-items").data([true])

    lb.enter().append("rect").classed("legend-box",true)
    li.enter().append("g").classed("legend-items",true)

    svg.selectAll("[data-legend]").each(function() {
        var self = d3.select(this)
        // .on("mouseover", mouseover2)
        // .on("mouseout", mouseout2)
        items[self.attr("data-legend")] = {
          pos : self.attr("data-legend-pos") || this.getBBox().y,
          color : self.attr("data-legend-color") != undefined ? 
          self.attr("data-legend-color") : self.style("fill") 
          != 'none' ? self.style("fill") : self.style("stroke") 
        }

      })

    items = d3.entries(items).sort(function(a,b) { return a.value.pos-b.value.pos})

    
    li.selectAll("text")
        .data(items,function(d) { return d.key})
        .call(function(d) { d.enter().append("text")})
        .call(function(d) { d.exit().remove()})
        .attr("y",function(d,i) { return 22*i })
        .attr("x","1em")
        .on("mouseover", function(d, i) {
        if (i == 0) {
          svg.selectAll(".link" + ".dorm").style("stroke-width", "3.5px");
        }
        else if (i == 2) {
          svg.selectAll(".link" + ".class").style("stroke-width", "3.5px");
        }
        else if (i == 1) {
          svg.selectAll(".link" + ".dira").style("stroke-width", "3.5px");
        }
        })
        .on("mouseout", function(d, i) {
        if (i == 0) {
          svg.selectAll(".link" + ".dorm").style("stroke-width", "1.5px");
        }
        else if (i == 2) {
          svg.selectAll(".link" + ".class").style("stroke-width", "1.5px");
        }
        else if (i == 1) {
          svg.selectAll(".link" + ".dira").style("stroke-width", "1.5px");
        }

        // why does this one not work but the other one does?!?

        }) 
        .style("font", "16px sans-serif")
        .style("line-height","2.0") 
        .text(function(d) { ;return d.key})

    li.selectAll("circle")
        .data(items,function(d) { return d.key})
        .call(function(d) { d.enter().append("circle")})
        .call(function(d) { d.exit().remove()})
        .attr("cy",function(d,i) { return i-0.25+"em"})
        .attr("cx",0)
        .attr("r","0.4em")
        .on("mouseover", function(d, i) {
        if (i == 0) {
          svg.selectAll(".link" + ".dorm").style("stroke-width", "4px");
        }
        else if (i == 2) {
          svg.selectAll(".link" + ".class").style("stroke-width", "4px");
        }
        else if (i == 1) {
          svg.selectAll(".link" + ".dira").style("stroke-width", "3.5px");
        }
        // else if (i == 3) {
        //   svg.selectAll(".link" + ".other").style("stroke-width", "3.5px");
        // }
        else if (i == 3) {
          svg.selectAll(".link" + ".block").style("stroke-width", "4px");
        }
        })
        .on("mouseout", function(d, i) {
        if (i == 0) {
          svg.selectAll(".link" + ".dorm").style("stroke-width", "1.5px");
        }
        else if (i == 2) {
          svg.selectAll(".link" + ".class").style("stroke-width", "1.5px");
        }
        else if (i == 1) {
          svg.selectAll(".link" + ".dira").style("stroke-width", "1.5px");
        }
        // else if (i == 3) {
        //   svg.selectAll(".link" + ".other").style("stroke-width", "1.5px");
        // }
        else if (i == 3) {
          svg.selectAll(".link" + ".block").style("stroke-width", "1.5px");
        }
        })  
        .style("fill",function(d) { console.log(d.value.color);

        return d.value.color})

    
    // Reposition and resize the blackoutline box
    // var lbbox = li[0][0].getBBox()  
    // lb.attr("x",(lbbox.x-legendPadding + 600))
    //     .attr("y",(lbbox.y-legendPadding + 50))
    //     .attr("height",(lbbox.height+2*legendPadding))
    //     .attr("width",(lbbox.width+3*legendPadding))
  })
  return g
}
})()



legend = svg.append("g")
    .attr("class","legend")
    .attr("transform","translate(700,150)")
    .style("font-size","22px")
    //.style("font", "20px sans-serif")
    // .attr("data-style-padding",10)
    .call(d3.legend)

// svg.selectAll("link")
//     .enter().append("svg:circle")

$('svg .link').tipsy({ 
        gravity: 'w', 
        html: true, 
        title: function() {
          // var c = d.comment;
          var d = this.__data__;
          var c = d.comment;
          return ' ' + c + '</span>'; 
        }
      });

// title: function() {
          // var d = this.__data__, c = colors(d.i);

// d3.select('button').on('click', 2011Data.js;


</script>


<div id="slide3">
  <div>
    <div id="SecondPic"> <H3>"Not a day goes by that I don't feel blessed to be a part of this group. </H3><H3>Thank you and hope everyone has a great thanksgiving!"</H3><H3> - Most liked text sent to the Groupme</H3></div>
  </div>
</div>

<div id = "graphs">
    <div id="chart_div" style = {font-size: 20px}></div>
    <div id="chart_div2"></div> 
    <div style = {margin-top: 50px;}><img src = "firstname.jpg" width="450" height="250">
      <img src = "wordcountwordcloud.jpg" width="550" height="270"></div>
</div>








<div id = "graphs2">
    <style>

body {
  font: 11px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

/*
.x.axis path {
  display: none;
}
*/

.line {
  stroke: black;
  fill: none;
  stroke-width: 0.75px;
}

.line.line0 {
  stroke: steelblue;
}

.line.line1 {
  stroke: steelblue;
}

.overlay {
  fill: none;
  pointer-events: all;
}

.focus circle {
  fill: none;
}

.focus circle.y0 {
  stroke: blue;
}

.focus circle.y1 {
  stroke: red;
}

.focus line {
  stroke: purple;
  shape-rendering: crispEdges;
}

.focus line.y0 {
  stroke: steelblue;
  stroke-dasharray: 3 3;
  opacity: .5;
}

.focus line.y1 {
  stroke: steelblue;
  stroke-dasharray: 3 3;
  opacity: .5;
}

.brush .extent {
  stroke: #fff;
  fill-opacity: .125;
  shape-rendering: crispEdges;
}
</style>
<!--   <H1> Text Messages by Day</H1> -->
<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
<script>

var main_margin = {top: 20, right: 80, bottom: 100, left: 40},
    mini_margin = {top: 430, right: 80, bottom: 20, left: 40},
    main_width = 960 - main_margin.left - main_margin.right,
    main_height = 500 - main_margin.top - main_margin.bottom,
    mini_height = 500 - mini_margin.top - mini_margin.bottom;

var formatDate = d3.time.format("%Y/%m/%d"),
    parseDate = formatDate.parse,
    bisectDate = d3.bisector(function(d) { return d.Uhrzeit; }).left,
    formatOutput0 = function(d) { return formatDate(d.Uhrzeit) + " - " + d.Durchschn+ " - "+d.Gesamt; },
    formatOutput1 = function(d) { return formatDate(d.Uhrzeit) + " - " + d.Anz; };

var main_x = d3.time.scale()
    .range([0, main_width]),
    mini_x = d3.time.scale()
    .range([0, main_width]);

var main_y0 = d3.scale.sqrt()
    .range([main_height, 0]),
    main_y1 = d3.scale.sqrt()
    .range([main_height, 0]),
    mini_y0 = d3.scale.sqrt()
    .range([mini_height, 0]),
    mini_y1 = d3.scale.sqrt()
    .range([mini_height, 0]);

var main_xAxis = d3.svg.axis()
    .scale(main_x)
    .tickFormat(d3.time.format("%Y/%m/%d"))
    .orient("bottom"),
    mini_xAxis = d3.svg.axis()
    .scale(mini_x)
    .tickFormat(d3.time.format("%Y/%m/%d"))
    .orient("bottom");

var main_yAxisLeft = d3.svg.axis()
    .scale(main_y0)
    .orient("left");
    main_yAxisRight = d3.svg.axis()
    .scale(main_y1)
    .orient("right");

var brush = d3.svg.brush()
    .x(mini_x)
    .on("brush", brush);

var main_line0 = d3.svg.line()
    .interpolate("cardinal")
    .x(function(d) { return main_x(d.Uhrzeit); })
    .y(function(d) { return main_y0(d.Durchschn); });

var main_line1 = d3.svg.line()
    .interpolate("cardinal")
    .x(function(d) { return main_x(d.Uhrzeit); })
    .y(function(d) { return main_y1(d.Anz); });

var mini_line0 = d3.svg.line()
    .x(function(d) { return mini_x(d.Uhrzeit); })
    .y(function(d) { return mini_y0(d.Durchschn); });

var mini_line1 = d3.svg.line()
    .x(function(d) { return mini_x(d.Uhrzeit); })
    .y(function(d) { return mini_y1(d.Anz); });

var svg = d3.select("body").append("svg")
    .attr("width", main_width + main_margin.left + main_margin.right)
    .attr("height", main_height + main_margin.top + main_margin.bottom);

svg.append("defs").append("clipPath")
    .attr("id", "clip")
  .append("rect")
    .attr("width", main_width)
    .attr("height", main_height);

var main = svg.append("g")
    .attr("transform", "translate(" + main_margin.left + "," + main_margin.top + ")");

var mini = svg.append("g")
    .attr("transform", "translate(" + mini_margin.left + "," + mini_margin.top + ")");

d3.csv("data.txt", function(error, data) {
  data.forEach(function(d) {
    d.Uhrzeit = parseDate(d.Uhrzeit);
    d.Durchschn = +d.Durchschn;
    d.Anz = +d.Anz;
  });

  data.sort(function(a, b) {
    return a.Uhrzeit - b.Uhrzeit;
  });

  main_x.domain([data[0].Uhrzeit, data[data.length - 1].Uhrzeit]);
  main_y0.domain(d3.extent(data, function(d) { return d.Durchschn; }));
  //main_y0.domain([0.1, d3.max(data, function(d) { return d.Durchschn; })]);
  main_y1.domain(d3.extent(data, function(d) { return d.Anz; }));
  mini_x.domain(main_x.domain());
  mini_y0.domain(main_y0.domain());
  mini_y1.domain(main_y1.domain());

  main.append("path")
      .datum(data)
      .attr("clip-path", "url(#clip)")
      .attr("class", "line line0")
      .attr("d", main_line0);

  main.append("path")
      .datum(data)
      .attr("clip-path", "url(#clip)")
      .attr("class", "line line1")
      .attr("d", main_line1);

  main.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + main_height + ")")
      .call(main_xAxis);

  main.append("g")
      .attr("class", "y axis axisLeft")
      .call(main_yAxisLeft)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Messages per day");

  main.append("g")
      .attr("class", "y axis axisRight")
      .attr("transform", "translate(" + main_width + ", 0)")
      .call(main_yAxisRight)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -12)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("  ");

  mini.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + mini_height + ")")
      .call(main_xAxis);

  mini.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", mini_line0);

  mini.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", mini_line1);

  mini.append("g")
      .attr("class", "x brush")
      .call(brush)
    .selectAll("rect")
      .attr("y", -6)
      .attr("height", mini_height + 7);

  var focus = main.append("g")
      .attr("class", "focus")
      .style("display", "none");

  // Anzeige auf der Zeitleiste
  focus.append("line")
      .attr("class", "x")
      .attr("y1", main_y0(0) - 6)
      .attr("y2", main_y0(0) + 6)

  // Anzeige auf der linken Leiste
  focus.append("line")
      .attr("class", "y0")
      .attr("x1", main_width - 6) // nach links
      .attr("x2", main_width + 6); // nach rechts

  // Anzeige auf der rechten Leiste
  focus.append("line")
      .attr("class", "y1")
      .attr("x1", main_width - 6)
      .attr("x2", main_width + 6);

  focus.append("circle")
      .attr("class", "y0")
      .attr("r", 4);

  focus.append("text")
      .attr("class", "y0")
      .attr("dy", "-1em");

  focus.append("circle")
      .attr("class", "y1")
      .attr("r", 4);

  focus.append("text")
      .attr("class", "y1")
      .attr("dy", "-1em");

  main.append("rect")
      .attr("class", "overlay")
      .attr("width", main_width)
      .attr("height", main_height)
      .on("mouseover", function() { focus.style("display", null); })
      .on("mouseout", function() { focus.style("display", "none"); })
      .on("mousemove", mousemove);

  function mousemove() {
    var x0 = main_x.invert(d3.mouse(this)[0]),
        i = bisectDate(data, x0, 1),
        d0 = data[i - 1],
        d1 = data[i],
        d = x0 - d0.Uhrzeit > d1.Uhrzeit - x0 ? d1 : d0;
    focus.select("circle.y0").attr("transform", "translate(" + main_x(d.Uhrzeit) + "," + main_y0(d.Gesamt) + ")");
    focus.select("text.y0").attr("transform", "translate(" + main_x(d.Uhrzeit) + "," + main_y0(d.Durchschn) + ")").text(formatOutput0(d));
    focus.select("circle.y1").attr("transform", "translate(" + main_x(d.Uhrzeit) + "," + main_y1(d.Anz) + ")");
    focus.select("text.y1").attr("transform", "translate(" + main_x(d.Uhrzeit) + "," + main_y1(d.Gesamt) + ")").text(formatOutput1(d));
    focus.select(".x").attr("transform", "translate(" + main_x(d.Uhrzeit) + ",0)");
    focus.select(".y0").attr("transform", "translate(" + main_width * -1 + ", " + main_y0(d.Durchschn) + ")").attr("x2", main_width + main_x(d.Uhrzeit));
    focus.select(".y1").attr("transform", "translate(0, " + main_y1(d.Anz) + ")").attr("x1", main_x(d.Uhrzeit));
  }
});

function brush() {
  main_x.domain(brush.empty() ? mini_x.domain() : brush.extent());
  main.select(".line0").attr("d", main_line0);
  main.select(".line1").attr("d", main_line1);
  main.select(".x.axis").call(main_xAxis);
}
</script>
</div>
</body>

